<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Player</title>
  </head>
  <body>
    <div class="audio-wrapper">
      <audio id="audio"></audio>
    </div>

    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function () {
        var track = null;
        var audioElement = document.getElementById('audio');

        var player = {
          setTrack: function (url) {
            track = url;
            audioElement.setAttribute('src', url);
            player.play();
          },

          play: function () {
            player.stop();
            if (track) {
              audioElement.play();
            }
          },

          stop: function () {
            audioElement.pause();
          }
        };

        window.addEventListener('message', function (e) {
          player.setTrack(e.data);
        });
      });
    </script>
  </body>
</html>
